<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Calculadora de Crédito - Jabel Muebles</title>

  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#007bff" />
  <link rel="icon" href="icon-192.png" />

  <!-- estilos -->
  <link rel="stylesheet" href="estilos.css" />

  <!-- SheetJS para leer Excel en el navegador -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>
  <div class="container" id="appContainer">
    <!-- header con logo centrado (sin contenedor extra) -->
    <header class="header">
      <img src="logo.png" alt="Jabel Muebles" id="logoHeader" />
      <h1>Calculadora de Crédito</h1>
    </header>

    <!-- boton menu hamburger -->
    <button id="btnMenu" class="hamburger" aria-label="Abrir menú">☰</button>

    <!-- layout: form + aside (consulta) -->
    <main class="main-grid">
      <section class="form-section">
        <div class="field">
          <label for="precio">Precio del Producto</label>
          <input type="text" id="precio" inputmode="decimal" placeholder="Ejemplo: 30,000.00" />
        </div>

        <div class="field">
          <div style="display: flex; align-items: center; gap: 8px;">
            <label for="inicial" style="margin: 0;">Pago Inicial (opcional)</label>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="opacity: 0.8;"><path d="M14.4297 5.92999L20.4997 12L14.4297 18.07" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3.5 12H20.33" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path></svg>
            <div id="sugerenciaInicial" class="sugerencia" style="margin: 0; font-size: 12px;">Inicial sugerida (25%): RD$ 0</div>
          </div>
          <input type="text" id="inicial" inputmode="decimal" placeholder="Ejemplo: 7,500.00" />
        </div>

        <div class="field small">
          <label for="meses">Meses a Pagar</label>
          <input type="number" id="meses" min="1" max="36" placeholder="6" />
        </div>

        <div class="field small" style="align-items:center;display:flex;gap:8px;">
          <label for="esEmpleado" style="margin:0;">Calculo para empleados</label>
          <input type="checkbox" id="esEmpleado" />
        </div>

        <div class="actions">
          <button class="primary" id="btnCalcular">Calcular</button>
          <button class="secondary" id="btnLimpiar">Limpiar</button>
          <button class="secondary" id="btnCompartir">Compartir</button>
          <button class="secondary" id="btnTema">Tema</button>
        </div>

        <div id="resultado" class="result" aria-live="polite"></div>

      </section>

      <!-- consulta dentro del contenedor principal (derecha en escritorio, abajo en móvil) -->
      <aside class="consulta">
        <h3>Consulta de Producto</h3>
        <label for="consultaId">ID del producto</label>
        <input type="text" id="consultaId" maxlength="8" inputmode="numeric" pattern="[0-9]*" placeholder="Ej: 1001" disabled />
        <div id="consultaError" class="consulta-error oculto"></div>
        <div style="display:flex;gap:8px;margin-top:10px;">
          <button id="btnConsultarProducto" class="primary small" disabled>Consultar</button>
          <button id="btnCargarExcel" class="secondary small">Cargar .xlsx</button>
        </div>
        <div class="consulta-note">Puedes actualizar el archivo <code>CM.xlsx</code> en la raíz del sitio o usar "Cargar .xlsx".</div>
      </aside>
    </main>
  </div>

  <!-- modal de producto -->
  <div id="modalProducto" class="modal oculto" role="dialog" aria-hidden="true">
    <div class="modal-content">
      <button class="modal-close" id="modalClose" aria-label="Cerrar">✕</button>
      <div class="modal-header" style="background:#E2601B;color:white;padding:12px;border-radius:8px 8px 0 0;display:flex;align-items:center;gap:12px;">
        <img src="logo.png" alt="logo" style="width:56px;height:56px;border-radius:8px;object-fit:cover;border:2px solid rgba(255,255,255,0.18)" />
        <div>
          <h2 style="margin:0;font-size:18px">Producto</h2>
          <small style="opacity:0.95">Información del producto</small>
        </div>
      </div>

      <div class="modal-body" style="padding:14px;">
        <p><strong>ID:</strong> <span id="modalId">-</span></p>
        <p><strong>Descripción:</strong> <span id="modalDesc">-</span></p>
        <p><strong>Costo:</strong> <span id="modalCosto">-</span></p>
        <div style="text-align:right;margin-top:12px;">
          <button id="modalCloseBtn" class="secondary">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- input file invisible para cargar excel -->
  <input type="file" id="fileProductos" accept=".xlsx" style="display:none" />

  <!-- alerta -->
  <div id="alerta" class="alerta oculto" role="status" aria-live="polite"></div>

  <!-- script -->
  <script src="script.js"></script>
</body>
</html>
